"use strict";(self["webpackChunkvuetify"]=self["webpackChunkvuetify"]||[]).push([[592],{57592:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,"sort-by":"calories"},scopedSlots:e._u([{key:"top",fn:function(){return[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[e._v("所有用户")]),i("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),i("v-spacer"),i("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),i("v-card-text",[i("v-container",[i("v-row",[i("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[i("v-text-field",{attrs:{label:"用户名修改"},model:{value:e.editedItem.username,callback:function(t){e.$set(e.editedItem,"username",t)},expression:"editedItem.username"}})],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" 取消 ")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v(" 保存 ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.isPermission",fn:function(t){var s=t.item;return[i("v-switch",{attrs:{label:""},on:{click:function(t){return e.Switch(s)}},model:{value:s.isPermission,callback:function(t){e.$set(s,"isPermission",t)},expression:"item.isPermission"}})]}},{key:"item.isEnabled",fn:function(t){var s=t.item;return[i("v-switch",{attrs:{label:""},on:{click:function(t){return e.disabled(s)}},model:{value:s.isEnabled,callback:function(t){e.$set(s,"isEnabled",t)},expression:"item.isEnabled"}})]}},{key:"item.actions",fn:function(t){var s=t.item;return[i("v-icon",{staticClass:"mr-2",staticStyle:{"margin-left":"25px"},attrs:{small:""},on:{click:function(t){return e.editItem(s)}}},[e._v(" mdi-pencil ")])]}},{key:"no-data",fn:function(){return[i("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v(" Reset ")])]},proxy:!0}])})},a=[],n=(i(82772),i(41539),i(78783),i(33948),i(41637),i(26166)),r=i.n(n);const l={data:function(){return{dialog:!1,dialogDelete:!1,headers:[{text:"用户名",value:"username",sortable:!1},{text:"是否为用户",value:"isPermission",sortable:!1},{text:"是否禁用",value:"isEnabled",sortable:!1},{text:"注册时间",value:"createTime",sortable:!1},{text:"编辑用户名",value:"actions",sortable:!1}],desserts:[],editedIndex:-1,editedItem:{username:""},defaultItem:{username:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"编辑用户"}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},created:function(){this.initialize()},methods:{initialize:function(){var e=this;r().get("/api/user").then((function(t){e.desserts=t.data.data}))},editItem:function(e){this.editedIndex=this.desserts.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},Switch:function(e){var t=this,i=new URLSearchParams;i.append("id",e.id),i.append("isPermission",e.isPermission),r().put("/api/user",i).then((function(e){e.data.data?(t.$message({message:"恭喜你，修改成功",type:"success"}),localStorage.clear(),t.initialize()):t.$message.error("错了哦，修改失败")}))},disabled:function(e){var t=this,i=new URLSearchParams;i.append("id",e.id),i.append("isEnabled",e.isEnabled),r().put("/api/user",i).then((function(e){e.data.data?(t.$message({message:"恭喜你，修改成功",type:"success"}),t.initialize()):t.$message.error("错了哦，修改失败")}))},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},save:function(){var e=this,t=new URLSearchParams;t.append("id",this.editedItem.id),t.append("username",this.editedItem.username),r().put("/api/user",t).then((function(t){t.data.data?(e.$message({message:"恭喜你，修改成功",type:"success"}),e.initialize()):e.$message.error("错了哦，修改失败")})),this.close()}}},o=l;var c=i(1001),d=(0,c.Z)(o,s,a,!1,null,null,null);const u=d.exports}}]);
//# sourceMappingURL=592.c424bd38.js.map