"use strict";(self["webpackChunkvuetify"]=self["webpackChunkvuetify"]||[]).push([[183],{183:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-data-table",{staticClass:"elevation-1",attrs:{search:e.search,headers:e.headers,items:e.desserts,"sort-by":"calories"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("轮播图")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,i=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),s),[e._v(" 添加 ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("div",{staticStyle:{display:"flex"}},[a("p",{staticStyle:{"margin-top":"10px","margin-right":"40px","white-space":"nowrap"}},[e._v("轮播图*")]),a("br"),a("br"),a("br"),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.urlImg,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{attrs:{src:e.imageUrl,width:"350px",height:"100px"}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)])],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" 取消 ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v(" 保存 ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[e._v("您确定要删除吗?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("取消")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("确定")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(s)}}},[e._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(s)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v(" Reset ")])]},proxy:!0}])})],1)},i=[],r=(a(82772),a(41539),a(78783),a(33948),a(41637),a(26166)),l=a.n(r);const n={name:"carousel",data:function(){return{imageUrl:"",checked:!0,urlImg:"/file/files/oss",search:"",dialog:!1,dialogDelete:!1,headers:[{text:"序列号",align:"start",sortable:!1,value:"sysId"},{text:"更新时间",value:"sysUpdate",sortable:!1,filterable:!1},{text:"Actions",value:"actions",sortable:!1}],desserts:[],editedIndex:-1,editedItem:{sysId:"",sysUpdate:""},defaultItem:{sysId:"",sysUpdate:""},deleteID:""}},computed:{formTitle:function(){return-1===this.editedIndex?"添加":"编辑"}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},created:function(){this.initialize()},methods:{initialize:function(){var e=this;l().get("/api/getCarousel").then((function(t){e.desserts=t.data.data}))},editItem:function(e){this.editedIndex=this.desserts.indexOf(e),this.editedItem=Object.assign({},e),this.$router.push({name:"carouselEdit",params:{edit:e}})},deleteItem:function(e){this.deleteID=e.sysId,this.dialogDelete=!0},deleteItemConfirm:function(){var e=this;l()["delete"]("/api/getCarousel",{params:{id:this.deleteID}}).then((function(t){t.data.data?(e.$message({message:"恭喜你，删除成功",type:"success"}),e.initialize()):e.$message.error("错了哦，删除失败")})),this.closeDelete()},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},save:function(){var e=this,t=new URLSearchParams;t.append("sysUrl",this.imageUrl),l().post("/api/getCarousel",t).then((function(t){t.data.data&&(e.$message({message:"恭喜你，添加成功",type:"success"}),e.initialize())})),this.close()},handleAvatarSuccess:function(e,t){this.imageUrl=e},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a}}},o=n;var c=a(1001),d=(0,c.Z)(o,s,i,!1,null,null,null);const u=d.exports}}]);
//# sourceMappingURL=183.21436dce.js.map